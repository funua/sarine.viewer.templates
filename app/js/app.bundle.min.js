!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(){"use strict";function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=e(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function(a){function b(a,b){if(!a)throw new Error('Selector missing, eg: new WallopSlider(".selector")');for(var c=0;c<h.length;c++)if(console.log("selectorPool[i] -> ",h[c]),h[c]===a)throw new Error("An instance of WallopSlider with this selector already exists: "+h[c]);if(this.options={btnPreviousClass:"WallopSlider-btn--previous",btnNextClass:"WallopSlider-btn--next",itemClass:"WallopSlider-item",currentItemClass:"WallopSlider-item--current",showPreviousClass:"WallopSlider-item--show-previous",showNextClass:"WallopSlider-item--show-next",hidePreviousClass:"WallopSlider-item--hide-previous",hideNextClass:"WallopSlider-item--hide-next",carousel:!1},this.$selector=a.length>0?a[0]:a,this.options=f(this.options,b),this.event=null,this.allItemsArray=Array.prototype.slice.call(this.$selector.querySelectorAll(" ."+this.options.itemClass)),this.allItemsArrayLength=this.allItemsArray.length-1,this.currentItemIndex=this.allItemsArray.indexOf(this.$selector.querySelector(" ."+this.options.currentItemClass)),this.buttonPrevious=this.$selector.querySelector(" ."+this.options.btnPreviousClass),this.buttonNext=this.$selector.querySelector(" ."+this.options.btnNextClass),this.bindEvents(),this.createCustomEvent(),this.currentItemIndex<0){var d=this;setTimeout(function(){d.currentItemIndex=0,d.goTo(d.currentItemIndex)},0)}}function c(a){return a?document.getElementsByClassName(a):void 0}function d(a,b){a&&(a.className=a.className.replace(/\s+$/gi,"")+" "+b)}function e(a,b){a&&(a.className=a.className.replace(b,""))}function f(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}function g(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}var h=[],i=b.prototype;i.updateButtonStates=function(){(this.buttonPrevious||this.buttonNext)&&(this.currentItemIndex===this.allItemsArrayLength&&this.options.carousel!==!0?this.buttonNext.setAttribute("disabled","disabled"):0===this.currentItemIndex&&this.options.carousel!==!0&&this.buttonPrevious.setAttribute("disabled","disabled"))},i.removeAllHelperSettings=function(){e(this.allItemsArray[this.currentItemIndex],this.options.currentItemClass),e(c(this.options.hidePreviousClass)[0],this.options.hidePreviousClass),e(c(this.options.hideNextClass)[0],this.options.hideNextClass),e(c(this.options.showPreviousClass)[0],this.options.showPreviousClass),e(c(this.options.showNextClass)[0],this.options.showNextClass),(this.buttonPrevious||this.buttonNext)&&(this.buttonPrevious.removeAttribute("disabled"),this.buttonNext.removeAttribute("disabled"))},i.goTo=function(a){if(this.options.carousel&&-1===a)a=this.allItemsArrayLength-1;else if(a>this.allItemsArrayLength||0>a||a===this.currentItemIndex)return;this.removeAllHelperSettings(),d(this.allItemsArray[this.currentItemIndex],a>this.currentItemIndex?this.options.hidePreviousClass:this.options.hideNextClass),d(this.allItemsArray[a],this.options.currentItemClass+" "+(a>this.currentItemIndex?this.options.showNextClass:this.options.showPreviousClass)),this.currentItemIndex=a,this.updateButtonStates(),this.event.detail.currentItemIndex=this.currentItemIndex,this.$selector.dispatchEvent(this.event)},i.previous=function(){this.goTo(this.options.carousel&&0===this.currentItemIndex?this.allItemsArrayLength:this.currentItemIndex-1)},i.next=function(){this.goTo(this.currentItemIndex>=this.allItemsArrayLength&&this.options.carousel===!0?0:this.currentItemIndex+1)},i.bindEvents=function(){if(h.push(this.$selector),this.buttonPrevious||this.buttonNext){var a=this;this.buttonPrevious.addEventListener("click",function(b){b.preventDefault(),a.previous()}),this.buttonNext.addEventListener("click",function(b){b.preventDefault(),a.next()})}},i.on=function(a,b){if("change"!==a)throw new Error('the only available event is "change"');this.$selector.addEventListener(a,function(a){return b(a)},!1)},i.createCustomEvent=function(){var a=this;this.event=new g("change",{detail:{parentSelector:a.$selector,currentItemIndex:Number(a.currentItemIndex)},bubbles:!0,cancelable:!0})},g.prototype=window.Event.prototype,window.CustomEvent=g,"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:a.WallopSlider=b}(this),function(a,b){"use strict";function c(a){a=a||{},this._overlay=a.overlay,this._openClassName=a.openClassName||"popup-wrap--open",this._closeClassName=a.closeClassName||"popup-wrap--close",this._openOverlayClassName=a.openOverlayClassName||"popup-overlay--open"}c.prototype.open=function(a){var c=this.currentElement;c!==a&&(c&&this.close(c),this.currentElement=a,b.add(this._overlay,this._openOverlayClassName),b.remove(a,this._closeClassName),b.add(a,this._openClassName))},c.prototype.close=function(a){var c;this.currentElement=null,b.remove(this._overlay,this._openOverlayClassName),b.remove(a,this._openClassName),b.add(a,this._closeClassName),c=a.querySelector("video"),c&&(c.pause(),c.currentTime=0)},a.PopupService=c}(window,window.classie),function(a,b){"use strict";function c(a){a=a||{};var c=Array.prototype.slice.call(a.bulletsContainer.querySelectorAll(a.bulletClassName),0),d=0,e=a.slider,f=a.activeBulletClassName||"",g=a.startFrom||0;c.forEach(function(a,b){a.addEventListener("click",function(){e.goTo(b+g)})}),f&&e.on("change",function(a){b.remove(c[d],f),d=a.detail.currentItemIndex,b.add(c[d],f)})}a.BulletNavigation=c}(window,window.classie),function(a,b){"use strict";function c(a){function c(){a.style.display=""}function d(){a.style.display="none"}function e(){g.play(),d()}var f=a.getAttribute("data-video-id"),g=b.getElementById(f||""),h=!1;g&&(g.load(),g.addEventListener("ended",c),g.addEventListener("pause",c),g.addEventListener("canplay",function(){h&&e()}),g.addEventListener("play",function(){d()}),a.addEventListener("click",function(){g.readyState<3?(g.load(),h=!0):e()}))}var d={initButton:c};a.videoPlay=d}(window,window.document),function(a,b,c,d,e,f,g,h,i){c(function(){"use strict";function j(a,b){return 0===b.length?a:a?j(a[b.shift()],b):void 0}function k(){var c,d=r&&r.lightGrades&&r.lightGrades.totalGrade&&r.lightGrades.totalGrade.name,e=a.gradeScales||{},f=e.totalGrade,g=b.querySelector("[data-total-grade]"),h=b.querySelector("[data-total-grade-stars]");d&&f&&f.some(function(a){return a.value===d?(c=a["default-display"],g.innerHTML=c.split(" ")[0],h.innerHTML=new Array(parseInt(c[c.length-1])+1).join("â˜…"),!0):!1})}var l=new f(b.querySelector(".slider"),{btnPreviousClass:"slider__btn--previous",btnNextClass:"slider__btn--next",itemClass:"slide",currentItemClass:"slide--current",showPreviousClass:"slide--show-previous",showNextClass:"slide--show-next",hidePreviousClass:"slide--hide-previous",hideNextClass:"slide--hide-next"}),m=(new h({slider:l,bulletsContainer:b.querySelector(".storyline"),bulletClassName:".storyline__item",activeBulletClassName:"storyline__item--active"}),new h({slider:l,bulletsContainer:b.querySelector(".summary__story-wrap"),bulletClassName:".summary__story",startFrom:1}),new g({overlay:b.getElementById("popup_overlay")})),n=Array.prototype.slice.call(b.querySelectorAll("[data-popup-id]"),0),o=Array.prototype.slice.call(b.querySelectorAll(".popup__close-btn"),0),p=Array.prototype.slice.call(b.querySelectorAll("[data-sarine-info]"),0),q=Array.prototype.slice.call(b.querySelectorAll("[data-light-grade]"),0),r=a.stones&&a.stones[0],s={1:"minimum",2:"standard",3:"high",4:"very-high",5:"exceptional"},t=4,u=Array.prototype.slice.call(b.querySelectorAll("[data-video-id]"),0);d.attach(b.body),l.on("change",function(a){var b=a.detail.parentSelector.querySelector(".slider__header");0===a.detail.currentItemIndex?(e.add(b,"slider__header--hide"),e.remove(b,"slider__header--show"),e.add(a.detail.parentSelector,"slider--summary")):(e.remove(b,"slider__header--hide"),e.add(b,"slider__header--show"),e.remove(a.detail.parentSelector,"slider--summary")),2===a.detail.currentItemIndex?e.add(a.detail.parentSelector,"slider--loupe"):e.remove(a.detail.parentSelector,"slider--loupe")}),c(b).on("full_init_end",function(a,c){console.log(c),t--,0>=t&&(b.querySelector(".slider").style.display="",b.querySelector(".preloader").style.display="none")}),p.forEach(function(a){var b=a.getAttribute("data-sarine-info"),c=j(r,b.split("."));(void 0===c||null===c)&&(a.parentNode.style.display="none")}),k(),q.forEach(function(a){var b=r&&r.lightGrades&&r.lightGrades[a.getAttribute("data-light-grade")],c=b&&b.value;c&&s[c]&&e.add(a,"specs__points--"+s[c])}),n.forEach(function(a){var c=b.getElementById(a.getAttribute("data-popup-id"));c&&a.addEventListener("click",function(){m.open(c)})}),o.forEach(function(a){a.addEventListener("click",function(){m.close(a.parentNode.parentNode)})}),u.forEach(function(a){i.initButton(a)})})}(window,window.document,window.jQuery,window.FastClick,window.classie,window.WallopSlider,window.PopupService,window.BulletNavigation,window.videoPlay);